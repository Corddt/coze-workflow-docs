中文回答。根据我的workflow_nodes.md文档和我的要求，帮我搭建一套工作流。
具体要说明以下问题：
1、要调用几个节点，每个节点的具体内容。
2、输入和输出的参数是什么
3、作为一个专攻系统流小说的提示词专家，如果某个节点需要提示词，要详细描述出提示词的具体内容。
4、作为一个计算机专家，详细说明各个节点所使用的数据的数据类型。
5、作为一个数据库专家，如果需要创建变量或者数据库信息也要详细说明。
6、变量赋值里的变量是应用变量，应用变量是用于配置应用中多处开发场景需要访问的数据，每次新请求均会初始化为默认值。
7、如果变量存在子变量，子变量要自动缩进。
8、详细说明变量是否是光在节点中创建还是说属于应用变量。

有一些注意事项：
1、根据技术文档，除了开始节点、输入节点、知识库写入节点外，其他所有节点都能读取变量值。所以输入节点没有输出的功能,所以输入节点不要给我预设输出功能。输出节点也没有输入功能，所以输出节点不要预设输入功能
2、Coze的数据库里有一些无法删除的预制内容，并且最多新增20个字段。"""存储字段名称
id 数据的唯一标识（主键）Integer
sys_platform 数据产生或使用的渠道 String
uuid 用户唯一标识，由系统生成 String
bstudio_create_time 数据插入的时间 Time
"""
3、我不需要api密钥，因为coze内自带大模型，可以直接使用。
4、Coze的变量名长度有限制，最多不超过20个字符。
5、变量一共这几种类型，每一个变量都要详细说明属于那种类型:"""String、Integer、Boolean、Number、Object、Array<String>、Array<Integer>、Array<Boolean>、Array<Number>、Array<Object>"""

6、只有Object变量类型可以新增子项变量

整个工作流的宏观情况请用mermaid图表绘制流程图。



我想用Coze把这个变成工作流，给我一些好的建议："""
我的具体想法：
1、改成用户扮演降临在主角身上的系统，用户可以选择自己是什么系统,也可以自定义。
然后随机生成一个主角，设定基本初始值，还有背景等等。
后面就主角开始冒险。
冒险以文字的形式呈现，每隔一段时间根据用户选择的系统类型随机生成一些任务，用户选择派送什么任务去交给主角完成。
根据任务难度判断，主角也可能完不成任务死去，也可能在做任务的时候随机触发和系统的对话，2、用户扮演系统和主角对话。
4、在大模型幻觉的问题。大模型在生成长篇内容时，可能会前后不一致，比如角色境界突然变化，或者任务逻辑矛盾。比如金丹期打渡劫期，这显然不合理，但模型可能会忽略之前的设定。需要设计一个严格的规则引擎，记录所有关键数据，比如角色等级、物品属性，每次生成内容时，先用规则引擎检查合理性，再让模型填充细节。每次生成任务前，先根据当前主角等级和世界规则，确定任务难度和可能的敌人等级，再让模型生成具体描述。这样能减少模型自由发挥导致的矛盾。5、然后是数据量的问题。游戏进行越久，累积的上下文越多，每次调用API都要带上全部历史，不仅成本高，还可能超出token限制，导致崩溃。解决办法是分块存储对话和事件，只将最近的关键信息传入模型，同时本地存储维护一个世界状态库，记录角色属性、物品、NPC状态等。每次生成新内容时，先查询当前状态，再结合最近的上下文，减少传输的数据量。另外，定期总结游戏进展，生成摘要，替换掉旧的详细记录，这样能保持上下文在可控范围内。
6、考虑任务生成的平衡性。任务难度应该根据主角的当前能力动态调整，避免太简单或太难。需要一个算法，根据主角的等级、装备、过往任务表现来计算任务难度，再让模型生成符合该难度的任务描述。
8、任务和对话有随机性，但又要保持连贯。设计一个事件池，根据游戏进度解锁不同的事件类型，模型从当前可用的事件池中选择生成内容，这样既保证多样性，又不会偏离大纲太远。
9、有防崩溃机制，万一模型生成的内容不符合用户需求，可以回滚到上一次的状态重新生成。具体来说，是应急操作，包含记忆回溯（加载过往关键节点）和系统修正（强制重新生成当前事件）。而系统修正本身有几率被主角发现，这个几率随着主角修为的升高，愈发容易被发现。被发现后，有概率让主角内心增加反感。这个也主要通过算法计算。
10、上下文管理策略上，采用RAG架构，将游戏事件向量化存储，每次API调用携带"最近3条对话 + 当前状态摘要 + 相关规则片段"
11、境界突破进度条举例：
    练气四层（650/1000）
12、在一开始，玩家与游戏角色开始交互，因为对主角来说有一个系统突然出现，主角会表现出惊讶的情节，这个在日志里也应有所体现
13、界面应当简洁易懂，系统的作用就是和主角对话和给主角派任务，任务有奖励
14、主角有基本信息卡片包含的内容包含"姓名（随机生成）"、年龄和寿元（动态增长，当主角每突破一层境界，寿元就会增加，增加的规则提前用大模型生成，增加的计算方法利用算法计算）、境界(数值增长主要靠算法计算，有进度条显示) 、目前所修功法（随机生成，一开始品质很低，后面碰到了某个事件或者通过完成系统任务，系统给予奖励里包含好的功法）、属性面板（折叠式）
15、还要有这个世界的基本信息，包含现在是哪一年，哪一月，哪一日，日期会随着主角的行动自动增加。也要展示这个世界的大境界，大境界通过调用大模型在世界初始化时自动生成，随机从6个大境界到12个大境界。
16、大模型返回的内容应该做预处理，比如说json模式,在请求中添加   response_format={"type": "json_object"}
17、大模型的调用方法参考这个：const options = {
  method: 'POST',
  headers: {Authorization: 'Bearer <token>', 'Content-Type': 'application/json'},
  body: '{"model":"Qwen/QwQ-32B","messages":[{"role":"user","content":"What opportunities and challenges will the Chinese large model industry face in 2025?"}],"stream":false,"max_tokens":512,"stop":null,"temperature":0.7,"top_p":0.7,"top_k":50,"frequency_penalty":0.5,"n":1,"response_format":{"type":"text"},"tools":[{"type":"function","function":{"description":"<string>","name":"<string>","parameters":{},"strict":false}}]}'
};

fetch('https://api.siliconflow.cn/v1/chat/completions', options)
  .then(response => response.json())
  .then(response => console.log(response))
  .catch(err => console.error(err));
18、所有的数值增长和概率计算应该主要靠算法计算，而非大模型自动生成
19、交互细节: 当鼠标悬停在NPC名字上时，弹出微型情报卡，包含NPC身份，姓名，对主角好感度，近期动向。这个NPC是随机生成的，但是随机生成后，这个NPC应当被记住，后面发生了事情还可能遇见（通过因果算法计算遇见的概率），而不是碰到后再也碰不到了
20、字体选择：标题采用书法字体（汉仪尚巍手书），正文使用等宽古籍字体
21、生成一些重要的事件，比如宗门大比，如果还没到日期，会有一个倒计时。
22、时间流速控制：闭关加速滑块（1天/10天/30天/自定义）
23、因果律调节滑块，调整主角命运潜在走向：命运偏向：保守/平衡/激进
24、要充满想象力，但也要根据上下文来合理制定事件的难度，比如在主角修为弱小时，就不要让主角惹到完全应对不了的敌人。
25、我希望这个游戏可以和小说一样有几千章那么长，故事发展要慢，要合理，流程内容张弛有度，故事推进合理。 
26、任务不仅有奖励，也有惩罚
27、大模型生成世界时，需要让大模型通读并认真分析包括但不限于《凡人修仙传》《仙逆》《遮天》《完美世界》《斗破苍穹》《伏天氏》《绝世武神》《武极天下》《武动乾坤》《真武世界》《三寸人间》《一念永恒》《我欲封天》等等等等这些传统玄幻小说，完善游戏的世界观、背景、剧情、NPC、事件等等设定，创造一个真正的修仙世界，并掌握推动故事流程进行的基本规则。
28、紧急干预机制：
   - 当触发死亡预警时，全屏逐渐被血色侵蚀
   - 倒计时3秒内未操作，主角可能会死亡或者主角自行做了一些事情然后躲过死劫，但是增加了对系统的不信任。以上的结局通过算法计算

29、人物属性采用响应式绑定，实时更新数值变化。
30、玩家点击"生成日常任务"、前端先调用规则引擎计算合理难度范围再向LLM发送结构化请求，之后解析LLM返回的JSON生成任务卡片
31、故事要足够有深度，足够合理，就像现实世界一样，同时也要塑造形象立体的npc，这个世界要真实，主角就是活在这个世界的一个人。 
32、游戏开始前，我需要你参考之前列举的各种传统玄幻小说的内容写一个本游戏的故事大纲，并按照大纲内容一步步推进游戏，之前我也说了，这个故事如果写成小说需要有两千多章，所以游戏也需要很长很长，大纲你自己严格记住，单独存储，但不用展示给用户和主角，以防剧透。 
33、面板简洁，风格古朴。不要太杂乱。
34、在游戏开始前，应该可以有一个配置页面，填写api秘钥并且刷新页面还存在，玩家可以自行选择系统的类型并且可以调用ai生成系统描述。
"""

